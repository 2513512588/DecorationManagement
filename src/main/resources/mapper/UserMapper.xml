<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.runnersoftware.decoration.mapper.UserMapper">


    <insert id="insert" parameterType="com.runnersoftware.decoration.model.User"  >
        INSERT INTO sys_user(id, username, password) SELECT
             <choose>
                 <when test="id != null">
                     #{id}
                 </when>
                 <otherwise>
                     UUID_SHORT()
                 </otherwise>
             </choose>
             , #{username} , #{password}
         WHERE NOT EXISTS(SELECT id FROM sys_user WHERE username = #{username})
    </insert>

    <update id="update" parameterType="com.runnersoftware.decoration.model.User"  >
        UPDATE sys_user
        <set>
            <if test="username != null and username != ''">
                username = #{username},
            </if>
            <if test="password != null and password != ''">
                password = #{password},
            </if>
            <if test="enable != null">
                enable = #{enable},
            </if>
        </set>
        WHERE id = '${id}'
    </update>

    <delete id="delete" parameterType="com.runnersoftware.decoration.model.User">
        DELETE FROM sys_user WHERE id = '${id}'
    </delete>

    <!--    <resultMap id="baseMap" type="com.runnersoftware.decoration.model.Designer" >-->
<!--        <id property="id" column="id" />-->
<!--        <result property="name" column="name" />-->
<!--        <result property="description" column="description" />-->
<!--        <result property="createTime" column="createtime" />-->
<!--        <result property="cover" column="cover" />-->
<!--        <result property="enable" column="enable" />-->
<!--    </resultMap>-->

</mapper>